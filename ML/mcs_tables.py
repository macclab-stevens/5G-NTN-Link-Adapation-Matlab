"""
5G NR MCS Table 1 (TS 38.214 5.1.3.1-1) subset used for policy ranking.
Each entry: index -> (Qm, R/1024). Spectral efficiency = Qm * (R/1024).
"""

from typing import Dict, Tuple


def table1() -> Dict[int, Tuple[int, float]]:
    # (Qm, R/1024)
    return {
        0: (2, 120 / 1024),
        1: (2, 157 / 1024),
        2: (2, 193 / 1024),
        3: (2, 251 / 1024),
        4: (2, 308 / 1024),
        5: (2, 379 / 1024),
        6: (2, 449 / 1024),
        7: (2, 526 / 1024),
        8: (2, 602 / 1024),
        9: (2, 679 / 1024),
        10: (4, 340 / 1024),
        11: (4, 378 / 1024),
        12: (4, 434 / 1024),
        13: (4, 490 / 1024),
        14: (4, 553 / 1024),
        15: (4, 616 / 1024),
        16: (6, 438 / 1024),
        17: (6, 466 / 1024),
        18: (6, 517 / 1024),
        19: (6, 567 / 1024),
        20: (6, 616 / 1024),
        21: (6, 666 / 1024),
        22: (6, 719 / 1024),
        23: (8, 567 / 1024),
        24: (8, 616 / 1024),
        25: (8, 666 / 1024),
        26: (8, 719 / 1024),
        27: (8, 772 / 1024),
    }


def spectral_efficiency(mcs_idx: int) -> float:
    qm, r = table1().get(int(mcs_idx), (0, 0.0))
    return float(qm) * float(r)

